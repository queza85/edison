<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>에디슨</title>
<link rel="stylesheet" href="./styles/layout.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="http://w2ui.com/src/w2ui-1.4.2.min.css" />
<script src="./js/jquery.1.11.1.js"></script> 
<script src="./js/json2.js"></script>
<script src="./js/common.js"></script>
<script type="text/javascript" src="http://w2ui.com/src/w2ui-1.4.2.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		// 로그인 처리 나중에 공통으로 처리 하기 
		// 우선은 테스트를 위해 매번 페이지에서 새로 로그인 하도록 함
		login("admin","edison2013!!");

		// 로그인 완료 후 로그인 체크
		if (isLogin()) {
			// 로그인 성공
			// 유저리스트 가지고 오기
		    $.ajax({
			  url: API_URL + "/simulation/list",
			  headers: {          
				  "Accept" : "application/json",         
				  "Content-Type" : "application/xml",
				  "Access-Control-Allow-Credentials" : "true",
				  "Authorization" : "Basic " + localStorage.getItem('Token') 
			  },				      	
			   type: "GET", 
			   contentType:"application/xml; charset=UTF-8",
			   dataType:"json"
			   }).done(function(data, status, xhr) {
				  // 통신성공
				  //alert(JSON.stringify(data));
				    var dateTimeFormatted = dateTime.format('{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}'); 

					var records_data = new Array();

					for (var i=0; i < data.count ; i++ ) {
					  var row_data = new Object();
	
					  row_data.recid = i + 1;
					  row_data.userId = data.simulations[i].userId;
					  row_data.uuid = data.simulations[i].uuid;
					  row_data.title = data.simulations[i].title;
					  row_data.solverId = data.simulations[i].solverId;
					  row_data.lastModified = parseSimDate(data.simulations[i].lastModified);
					  row_data.jobCount = data.simulations[i].jobCount;
					  
					 
					  records_data.push(row_data);
					}

					$('#grid').w2grid({
						name : 'grid',
						show :{
							header : true,
							toolbar : true,
							footer : true,
							lineNumbers : true,
							columnHeaders : true,
							expandColumn : true,
							selectColumn : true,
							emptyRecord : true,
							toolbarReload : true,
							toolbarColumns : true,
							toolbarSearch : true,
							toolbarAdd : true,
							toolbarDelete : true,
							toolbarSave : true
						},
						columns : [{field : 'userId', caption : 'ID', size : '10%'},
								   {field : 'uuid', caption :'Sim_ID', size : '20%'},
								   {field : 'title', caption : 'Title', size : '20%'},
								   {field : 'solverId', caption : 'Solver_ID', size : '20%'},
								   {filed : 'lastModified', caption : '등록일자', size : '10%'},
								   {filed : 'jobCount', caption : '작업수', size : '10%'}],
						
						
						records : records_data
					});
			   }).fail(function(xhr, status, error) {
				  // 통신실패
				  ajaxError(xhr, status, error);
			   }).always(function(arg1, status, arg2) {
			   });
		}
	});
</script>
</head>
<body id="top">
<div class="wrapper col1">
  <div id="header">
    <div id="logo">
      <h1><a href="#">에디슨 프로젝트</a></h1>
      <p><strong>관리자페이지</strong></p>
    </div>
    <div id="newsletter">
      <p>로그인</p>
      <form action="#" method="post">
        <fieldset>
		  <input type="text" value="" id="id"/>
          <input type="password" value="" id="pw"/>
          <input type="submit" name="news_go" id="news_go" value="login" href="http://150.183.247.210:8080/majin/api/user/login"/>
        </fieldset>
      </form>
    </div>
    <br class="clear" />
  </div>
</div>
<div class="wrapper col2">
  <div id="topbar">
    <div id="topnav">
      <ul>
        <li><a href="userlist.html">유저 리스트</a></li>
        <li class="active"><a href="simlist.html">시뮬레이션 리스트</a></li>
        <li><a href="full-width.html">페이지3</a></li>
        <li><a href="#">페이지4</a>
          <ul>
            <li><a href="#">페이지4-1</a></li>
            <li><a href="#">페이지4-2</a></li>
            <li><a href="#">페이지4-3</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <br class="clear" />
  </div>
</div>
<div class="wrapper col3">
  <div id="container">
    <div id="content">
		<div id="grid" style="width: 100%; height: 350px;"></div>
    </div>
    <br class="clear" />
  </div>
</div>
<div class="wrapper col7">
  <div id="copyright">
    <p class="fl_left">Copyright &copy; 2016 - All Rights Reserved - <a href="#">Domain Name</a></p>
    <p class="fl_right">Template by <a target="_blank" href="http://www.os-templates.com/" title="Free Website Templates">OS Templates</a></p>
    <br class="clear" />
  </div>
</div>
</body>
</html>